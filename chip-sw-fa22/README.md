# BWRC-ChipUtil-TileLinkTrafficGenerator

[TileLink Spec v1.8.1](https://starfivetech.com/uploads/tilelink_spec_1.8.1.pdf)

## TileLink

(OSCIBEAR Setup)

### A Channel

| Signal    | Type    | Width | Description |
| --------- | ------- | ----- | -------- |
| a_opcode  | C       | 3       | |
| a_param   | C       | 3       | |
| a_size    | C       | z = 4   | |
| a_source  | C       | o = 4   | |
| a_address | C       | a = 32  | |
| a_mask    | C       | w = 8   | |
| a_data    | D       | 8w = 64 | |
| a_corrupt | D       | 1       | |
| a_valid   | V       | 1       | |
| a_ready   | R (inv) | 1       | |

### Messages

| Type            | Channel | Opcode | Param | Note                           |
| --------------- | ------- | ------ | ----- | ------------------------------ |
| PutFullData     | Ch. A   | 0x0    | 0x0   | Slave responses AccessAck      |
| PutPartialData  | Ch. A   | 0x1    | 0x0   | Slave responses AccessAck      |
| Get             | Ch. A   | 0x4    | 0x0   | Slave responses AccessAckData  |
| AccessAck       | Ch. D   | 0x0    | 0x0   |                                |
| AccessAckData   | Ch. D   | 0x1    | 0x0   |                                |


### A Standard TSI Frame

```
            |    __    __    __    __           __    __    __           __    __           __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __    __   
TL CLK      | __/  \__/  \__/  \__/  \__ ... __/  \__/  \__/  \__ ... __/  \__/  \__ ... __/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \__/  \_
            |          _________________ ... ____________________     ______________     ______________________________________________________________________________________________________________
MOSI Valid  | ________/                                           ...                ...                                                                                                               \____________________________________________________________ ...
            |    _______________________ ... ____________________     ______________     ______________________________________________________________________________________________________________      _______________________________________________________
MOSI Ready  | __/                                                 ...                ...                                                                                                               \____/                                                        ...
            |          _____ ___________ ... __ _____ ___________     __ ___________     ___ ______________________ ______________________ __________________ _________________ _______________________
MOSI Data   | ________/     X_ MASK ____ ... __X_ C _X_ DATA ____ ... __X_ ADDRESS _ ... ___X_ SOURCE _____________X_ SIZE _______________X_ PARAM __________X_ OPCODE ________X_ CHANID ______________\____________________________________________________________ ...
            |          last | mask[7:0]        |     | data[63:0]       | addr[31:0]        | source[3:0]          | size[3:0]            | param[2:0]       | opcode[2:0]      | chanid[2:0]
            |                                   ^ corrupt[0:0]
            |                                                                                                                                                                                                                                                 ______
MISO Valid  | ___________________________________________________ ... ______________ ... ____________________________________________________________________________________________________________________________________________________________________/       ...
            |          __________________________________________     ______________     ___________________________________________________________________________________________________________________________________________________________________________
MISO Ready  | ________/                                           ...                ...                                                                                                                                                                             ...
            |                                                                                                                                                                                                                                                 _____
MISO Data   | ___________________________________________________ ... ______________ ... ____________________________________________________________________________________________________________________________________________________________________/     X ...
            |                                                                                                                                                                                                                                                 last | ...
```
